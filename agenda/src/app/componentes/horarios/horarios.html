<div class="agenda-page">
  <div class="agenda-main">
    <div class="agenda-header">
      <div>
        <h1>Agenda</h1>
        <p class="subtitle">Gerencie seus agendamentos</p>
      </div>
      <div class="month-controls">
        <button class="icon-btn" (click)="prevMonth()">‹</button>
        <div class="month-label">{{ monthLabel() | titlecase }}</div>
        <button class="icon-btn" (click)="nextMonth()">›</button>
      </div>
    </div>

    <div class="calendar-and-list">
      <!-- CALENDÁRIO -->
      <div class="calendar">
        <div class="weekdays">
          <div>Dom</div><div>Seg</div><div>Ter</div><div>Qua</div><div>Qui</div><div>Sex</div><div>Sáb</div>
        </div>

        <div class="weeks">
          <div class="week" *ngFor="let week of weeks">
            <div class="day"
                 *ngFor="let d of week"
                 [class.empty]="d === 0"
                 [class.has-event]="hasEvent(d)"
                 [class.selected]="isSelected(d)"
                 (click)="selectDay(d)">
              <div class="day-number">{{ d === 0 ? '' : d }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- LISTA DO LADO (agendamentos do dia) -->
      <aside class="side-list">
        <div class="side-header">
          <div class="date-label">{{ selectedDate | date:'dd/MM/yyyy' }}</div>
          <button class="new-btn">+ Novo Agendamento</button>
        </div>

        <div class="appointments-list">
          <div *ngIf="appointmentsOfSelected.length === 0" class="empty-note">Nenhum agendamento para este dia.</div>

          <div class="appointment-card" *ngFor="let a of appointmentsOfSelected">
            <div class="time">{{ a.time }}</div>
            <div class="body">
              <div class="client">{{ a.client }}</div>
              <div class="service">{{ a.service }}</div>
            </div>
            <div class="status" [ngClass]="{'confirmado': a.status==='Confirmado','pendente': a.status==='Pendente'}">{{ a.status }}</div>
          </div>
        </div>
      </aside>
    </div>

    <!-- VISUALIZAÇÃO POR HORÁRIOS -->
    <section class="time-visualization">
      <h3>Visualização por Horários</h3>
      <div class="slots-grid">
        <div class="slot" *ngFor="let s of timeSlots" [class.occupied]="slotStatus(s).state==='Ocupado'">
          <div class="slot-time">{{ s }}</div>
          <div class="slot-state">{{ slotStatus(s).state }}</div>
        </div>
      </div>
    </section>
  </div>
</div>
